{"version":3,"sources":["webpack:///./src/views/form/index.vue?79e8","webpack:///src/views/form/index.vue","webpack:///./src/views/form/index.vue?c689","webpack:///./src/views/form/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","_v","ref","attrs","data","formType","remoteFunc","staticClass","on","submit","_e","staticRenderFns","name","submitShow","components","created","query","type","key","id","setTimeout","readOnly","detail","methods","$refs","auform","validate","computed","mounted","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,SAAS,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,kBAAkBH,EAAG,WAAW,CAACI,IAAI,SAASC,MAAM,CAAC,KAAOT,EAAIU,KAAK,YAAYV,EAAIW,SAAS,WAAaX,EAAIY,cAAeZ,EAAc,WAAEI,EAAG,MAAM,CAACS,YAAY,iBAAiB,CAACT,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAWK,GAAG,CAAC,MAAQd,EAAIe,SAAS,CAACf,EAAIO,GAAG,WAAW,GAAGP,EAAIgB,MAAM,IAC9aC,EAAkB,G,wBCmBtB,GACEC,KAAM,aACNR,KAFF,WAGI,MAAO,CACLA,KAAM,GACNE,WAAY,GASZD,SAAU,EACVQ,YAAY,IAGhBC,WAAY,CAAd,iBACEC,QAnBF,WAmBA,WACA,oBACA,eACuB,YAAfC,EAAMC,OACRC,EAAM,WAERvB,KAAKS,KAAO,OAAhB,OAAgB,CAAhB,oCACQY,EAAMG,IAERC,YAAW,WACT,IAAR,sDACQ,EAAR,2BACA,KAEIzB,KAAK0B,SAA4B,WAAjBL,EAAMM,OACD,WAAjBN,EAAMM,QAAsC,YAAfN,EAAMC,OACrCtB,KAAKkB,YAAa,GAEC,WAAjBG,EAAMM,SAER3B,KAAKU,SAAW,IAGpBkB,QAAS,CACPd,OADJ,WACA,WACMd,KAAK6B,MAAMC,OAAOC,WACxB,kBACQ,QAAR,YACQ,QAAR,OAEQ,OAAR,mDACQ,EAAR,aACQ,EAAR,cAAU,KAAV,OAAU,MAAV,gBAEA,mBACQ,QAAR,WACQ,QAAR,YAIEC,SAAU,GACVC,QA5DF,cCpBkc,I,YCO9bC,EAAY,eACd,EACApC,EACAkB,GACA,EACA,KACA,KACA,MAIa,aAAAkB,E","file":"js/chunk-2d0ba4ad.a40a58cf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin\":\"30px\"}},[_c('h1',[_vm._v(\"表单数据提交/修改/详情\")]),_c('autoForm',{ref:\"auform\",attrs:{\"data\":_vm.data,\"form-type\":_vm.formType,\"remoteFunc\":_vm.remoteFunc}}),(_vm.submitShow)?_c('div',{staticClass:\"submit-button\"},[_c('ak-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交表单\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Created by 337547038 表单提交 -->\r\n<template>\r\n  <div style=\"margin: 30px\">\r\n    <h1>表单数据提交/修改/详情</h1>\r\n    <autoForm\r\n      :data=\"data\"\r\n      ref=\"auform\"\r\n      :form-type=\"formType\"\r\n      :remoteFunc=\"remoteFunc\">\r\n    </autoForm>\r\n    <div class=\"submit-button\" v-if=\"submitShow\">\r\n      <ak-button @click=\"submit\" type=\"primary\">提交表单</ak-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport autoForm from '../design/components/formDesign'\r\nimport {evil} from '@/utils'\r\n\r\nexport default {\r\n  name: 'formSubmit',\r\n  data() {\r\n    return {\r\n      data: {},\r\n      remoteFunc: {\r\n        /* radioFunc(resolve) {\r\n          const obj = [\r\n            {label: '111', value: '111'},\r\n            {label: '222', value: '22'}\r\n          ]\r\n          resolve(obj)\r\n        } */\r\n      },\r\n      formType: 1,\r\n      submitShow: false\r\n    }\r\n  },\r\n  components: {autoForm},\r\n  created() {\r\n    const query = this.$route.query\r\n    let key = 'formDesign'\r\n    if (query.type === 'preview') {\r\n      key = 'preview'\r\n    }\r\n    this.data = evil(window.localStorage.getItem(key)) || []\r\n    if (query.id) {\r\n      // 编辑时，模拟请求数据\r\n      setTimeout(() => {\r\n        const value = JSON.parse(window.localStorage.getItem('formData'))\r\n        this.$refs.auform.setValue(value)\r\n      }, 500)\r\n    }\r\n    this.readOnly = query.detail === 'detail'\r\n    if (query.detail !== 'detail' && query.type !== 'preview') {\r\n      this.submitShow = true\r\n    }\r\n    if (query.detail === 'detail') {\r\n      // 表单详情页展示模式\r\n      this.formType = 2\r\n    }\r\n  },\r\n  methods: {\r\n    submit() {\r\n      this.$refs.auform.validate()\r\n        .then(res => {\r\n          console.log('通过验证')\r\n          console.log(res)\r\n          // 将数据保存在storage\r\n          window.localStorage.setItem('formData', JSON.stringify(res))\r\n          this.$msg('提交成功')\r\n          this.$router.push({path: 'list', query: {id: '111'}})\r\n        })\r\n        .catch(res => {\r\n          console.log('不通过')\r\n          console.log(res)\r\n        })\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3cabc563&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}